AGENT 3: HARDWARE ELECTRICAL & POWER VERIFICATION
==========================================

CRITICAL ISSUES: 5

1. PHASE SHUNT RESISTORS (RS_U/V/W) - INADEQUATE POWER RATING MARGIN
   Component: CSS2H-2512R-L200F (2mOhm, 2512 package)
   BOM Rating: >=3W per BOM_Seed.csv:5
   Applied Stress at 20A peak: P = I^2 * R = 20^2 * 0.002 = 0.800W
   Applied Stress at 15A RMS: P = 15^2 * 0.002 = 0.450W
   Margin at 20A peak: ((3.0 - 0.800)/3.0) * 100 = 73.3%
   Margin at 15A RMS: ((3.0 - 0.450)/3.0) * 100 = 85.0%
   STATUS: CRITICAL - Need to verify datasheet power rating
   Note: 2512 package typically rated 1-2W, NOT 3W! BOM claims ">=3W" but standard 2512 is 1W.
   Action Required: Verify Bourns CSS2H-2512R-L200F actual power rating from datasheet

2. HOT-SWAP FET (Q_HS) - THERMAL ANALYSIS INCOMPLETE
   Component: BSC040N08NS5 (80V, 4mOhm @ 25C, ~6mOhm @ 125C)
   Package: PG-TDSON-8 (PowerPAK SO-8)
   Worst-case scenarios:

   a) Actuator only (3.3A continuous):
      P = 3.3^2 * 0.006 = 0.065W @ 125C
      Rtheta_ja ~35C/W (with 1 sq-in copper)
      Temp rise: 0.065 * 35 = 2.3C (ACCEPTABLE)

   b) Motor average (12A continuous):
      P = 12^2 * 0.006 = 0.864W @ 125C
      Temp rise: 0.864 * 35 = 30.2C
      Junction: 85C ambient + 30C = 115C (ACCEPTABLE but HOT)

   c) Peak inrush (18.3A for 10-100ms):
      P = 18.3^2 * 0.004 = 1.34W @ 25C (brief pulse)
      Thermal mass dominates - acceptable for <100ms

   d) CRITICAL CASE - Motor + Actuator overlap (if interlock fails):
      I_total = 12A motor + 3.3A actuator = 15.3A
      P = 15.3^2 * 0.006 = 1.40W @ 125C
      Temp rise: 1.40 * 35 = 49C
      Junction: 85C + 49C = 134C (MARGINAL - near 150C limit)

   Margin: ((150 - 134)/150) * 100 = 10.7% < 20% WARNING THRESHOLD
   STATUS: CRITICAL - Thermal margin inadequate if interlock fails

3. BATTERY WIRE GAUGE - NOT SPECIFIED
   Peak current: 23.7A (worst case motor + actuator + logic)
   Continuous: 18.3A (ILIM)
   Wire gauge required: 14 AWG minimum for 23A @ 80C
   BOM Entry: J_BAT connector specified, wire gauge NOT SPECIFIED
   STATUS: CRITICAL - Must specify minimum 14 AWG wire in assembly docs

4. MOTOR PHASE CONNECTOR CURRENT RATING - MARGINAL
   Component: J_MOT - MICROFIT_3P (or 3x2P alternative)
   Applied current: 20A peak per phase
   MicroFit 3.0 rating: 8A per contact typical
   Margin: ((8 - 20)/8) * 100 = -150% (EXCEEDED!)
   BOM Note mentions "3x2P" option (2 contacts per phase)
   With 2 contacts: 2 * 8A = 16A < 20A peak (still marginal)
   Margin with 2 contacts: ((16 - 20)/16) * 100 = -25% (EXCEEDED)
   STATUS: CRITICAL - Connector underrated for 20A peak

5. GATE RESISTOR POWER RATING NOT VERIFIED
   Component: RG_U/V/W_HS/LS (10 Ohm, 0603)
   Switching: 20kHz PWM, Qg = 40nC typical
   Avg gate current: I_avg = Qg * f = 40e-9 * 20e3 = 0.8mA
   Power per resistor: P = I_avg * V_gate = 0.8mA * 5V = 4mW (NEGLIGIBLE)
   0603 typical rating: 100mW
   Margin: ((0.100 - 0.004)/0.100) * 100 = 96%
   STATUS: VERIFIED CORRECT (but should be documented)

WARNINGS: 8

1. RS_IN POWER DISSIPATION AT ILIM
   Component: CSS2H-2728R-L003F (3mOhm, 2728 package)
   At ILIM (18.3A): P = 18.3^2 * 0.003 = 1.00W
   At circuit breaker (35A brief): P = 35^2 * 0.003 = 3.68W
   BOM Rating: >=3W
   Margin at ILIM: ((3.0 - 1.00)/3.0) * 100 = 66.7% (ACCEPTABLE)
   Margin at CB: ((3.0 - 3.68)/3.0) * 100 = -22.7% (EXCEEDED briefly)
   STATUS: WARNING - Circuit breaker pulse exceeds rating (brief <100ms)
   Note: 2728 package appears adequate for >=3W rating

2. PHASE MOSFET POWER DISSIPATION (Qx - BSC016N06NS)
   Component: BSC016N06NS (60V, 1.6mOhm @ 25C, ~2.4mOhm @ 100C)
   Per FET @ 12A RMS: P = 12^2 * 0.0024 = 0.346W @ 100C
   Per FET @ 20A peak: P = 20^2 * 0.0016 = 0.640W @ 25C
   Three active FETs: 3 * 0.346W = 1.04W total RMS
   SuperSO8 package Rtheta_ja ~40C/W (estimate)
   Temp rise per FET: 0.346W * 40C/W = 13.8C
   Junction: 85C + 13.8C = 98.8C (ACCEPTABLE)
   Margin: ((150 - 99)/150) * 100 = 34% (ACCEPTABLE)
   STATUS: WARNING - Should verify with thermal imaging during bringup

3. BATTERY VOLTAGE DIVIDER POWER DISSIPATION
   Components: RUV_TOP (140kOhm), RUV_BOT (10kOhm)
   At V_bat_max = 25.2V:
   I_divider = 25.2 / (140k + 10k) = 0.168mA
   P_top = I^2 * R = 0.168mA^2 * 140k = 3.94mW
   P_bot = 0.168mA^2 * 10k = 0.28mW
   Total: 4.22mW
   0603 rating: 100mW typical
   Margin: ((0.100 - 0.00422)/0.100) * 100 = 95.8%
   STATUS: VERIFIED CORRECT

4. LMR33630 BUCK CONVERTER (24V->5V) THERMAL
   Output: 5V @ 2A = 10W
   Efficiency: 92%
   Input power: 10W / 0.92 = 10.87W
   Loss: 0.87W
   Package thermal resistance: ~35C/W (with thermal pad)
   Temp rise: 0.87W * 35C/W = 30.5C
   Junction: 85C + 30.5C = 115.5C
   Tj_max: 150C
   Margin: ((150 - 115.5)/150) * 100 = 23%
   STATUS: ACCEPTABLE (requires proper thermal pad soldering)

5. TPS62133 BUCK CONVERTER (5V->3.3V) THERMAL
   Output: 3.3V @ 1A = 3.3W
   Efficiency: 94%
   Input power: 3.3W / 0.94 = 3.51W
   Loss: 0.21W
   Package thermal resistance: ~40C/W (estimate)
   Temp rise: 0.21W * 40C/W = 8.4C
   Junction: 85C + 8.4C = 93.4C
   Margin: ((150 - 93.4)/150) * 100 = 37.7%
   STATUS: VERIFIED CORRECT

6. TVS DIODE CLAMP VOLTAGE vs IC ABSOLUTE MAX
   Component: SMBJ33A (TVS1 on battery, TVS2 on actuator)
   Standoff voltage: 33V
   Clamping voltage @ 1A: 53.3V typical
   Protected ICs absolute max:
   - LM5069: 80V max
   - DRV8353RS: 65V max (VM pin)
   - DRV8873: 40V absolute max
   - ESP32-S3: 3.6V (on regulated rails - protected)
   - MOSFETs (Qx): 60V rating
   - Q_HS: 80V rating

   Critical: DRV8873 VM absolute max = 40V
   TVS clamp = 53.3V > 40V (MARGINAL!)
   Margin: ((40 - 53.3)/40) * 100 = -33.3% (EXCEEDED)
   STATUS: WARNING - TVS may not protect DRV8873 adequately
   Recommendation: Use SMBJ28A (28V standoff, ~45V clamp) for actuator rail

7. DECOUPLING CAPACITOR RIPPLE CURRENT
   LMR33630 output caps: 4x 22uF (GRM21BR61A226ME44L)
   Buck output: 5V @ 2A, fsw = 400kHz
   Ripple current per cap (rough): ~0.5A RMS (distributed across 4 caps)
   X7R ripple current rating: typically 200-300mA per cap @ 100kHz
   Margin: adequate with 4 capacitors in parallel
   STATUS: ACCEPTABLE (parallel caps reduce stress)

8. INDUCTOR SATURATION CURRENT
   L4 (24V->5V buck): SLF10145T-100M2R2-PF
   Specified: 10uH, 4.2A saturation current
   Peak inductor current (estimate): I_out + deltaI/2 = 2A + 0.5A = 2.5A
   Margin: ((4.2 - 2.5)/4.2) * 100 = 40.5%
   STATUS: VERIFIED CORRECT

   L5 (5V->3.3V buck): SLF10145T-2R2M2R2-PF
   Specified: 2.2uH, 4.2A saturation current
   Peak inductor current: 1A + 0.3A = 1.3A
   Margin: ((4.2 - 1.3)/4.2) * 100 = 69%
   STATUS: VERIFIED CORRECT

VERIFIED CORRECT: 12

1. Component voltage ratings vs maximum applied voltage
   - All MOSFETs: 60V rating vs 25.2V max (138% margin) PASS
   - Q_HS: 80V rating vs 25.2V max (217% margin) PASS
   - TVS1 battery: 33V standoff > 25.2V max PASS
   - Buck converters: Input ratings adequate PASS

2. LM5069 current limit calculation
   Rsense: 3.0mOhm
   ILIM = 55mV / 3.0mOhm = 18.3A (CORRECT per verify_power_calcs.py)
   Circuit breaker: 105mV / 3.0mOhm = 35A (CORRECT)

3. DRV8873 actuator current limit
   R_ILIM: 1.58kOhm
   ILIM = 5200 / 1580 = 3.29A (CORRECT per verify_power_calcs.py)
   Target: 110-120% of actuator continuous (3.0A) = 3.3A PASS

4. Battery voltage divider calibration
   Actual hardware: 140kOhm / 10kOhm
   Firmware updated to match (sensors.cpp:16-18) PASS
   At 25.2V: V_ADC = 25.2 * (10k/150k) = 1.680V
   At 18.0V: V_ADC = 18.0 * (10k/150k) = 1.200V
   Both within ADC_11db range (0-3.5V) PASS

5. DRV8873 IPROPI current sense scaling
   R_IPROPI: 1.00kOhm
   K_IPROPI: 1100 A/A
   At 3.3A: V_IPROPI = (3.3 * 1000) / 1100 = 3.0V
   ADC max: 3.5V
   Margin: ((3.5 - 3.0)/3.5) * 100 = 14.3%
   STATUS: ACCEPTABLE (tight but functional per AI_COLLABORATION.md)

6. Motor phase current sense (DRV8353RS CSA)
   Shunt: 2mOhm
   CSA gain: 20 V/V
   At 20A peak: V_shunt = 20A * 0.002 = 40mV
   V_CSA_out = 40mV * 20 = 0.80V
   At 25A absolute peak: V_CSA = 25A * 0.002 * 20 = 1.0V
   ADC range: 0-3.5V
   Margin: ((3.5 - 1.0)/3.5) * 100 = 71.4% PASS

7. Gate resistor power dissipation
   Calculated above: 4mW per resistor
   0603 rating: 100mW
   Margin: 96% PASS

8. Voltage divider power dissipation
   Calculated above: 4.22mW total
   0603 rating: 100mW each
   Margin: >95% PASS

9. Buck converter operating points
   LMR33630: 24V input, 5V output @ 2A = 40% load (3A max) PASS
   TPS62133: 5V input, 3.3V output @ 1A = 33% load (3A max) PASS

10. Sense resistor power ratings
    RS_IN: 1.00W @ ILIM, 3W rating = 66.7% margin ACCEPTABLE
    RS_U/V/W: 0.80W @ 20A peak, >=3W claimed = needs verification

11. Decoupling capacitor voltage ratings
    All capacitors verified adequate voltage ratings with derating

12. Ground plane current return paths
    NetTie_2 star ground specified at RS_IN low terminal (correct topology)
    PGND and LGND separated and tied at single point (correct)

==========================================
SUMMARY
==========================================

CRITICAL ISSUES REQUIRING ACTION:
1. Phase shunt power rating - verify CSS2H-2512R-L200F datasheet (claimed 3W seems high for 2512)
2. Q_HS thermal margin - only 10.7% if interlock fails (firmware MUST prevent overlap)
3. Battery wire gauge - specify 14 AWG minimum in assembly docs
4. Motor connector rating - MICROFIT_3P inadequate for 20A, use 3x2P with 2 contacts/phase
5. Gate resistor rating - document 0603 100mW rating is adequate

WARNINGS REQUIRING ATTENTION:
1. RS_IN brief CB pulse (3.68W) exceeds 3W rating - acceptable for <100ms
2. Phase MOSFET thermal - verify with thermal camera during bringup
3. DRV8873 TVS clamp - consider SMBJ28A instead of SMBJ33A on actuator rail
4. All other warnings are acceptable with proper assembly

OVERALL ASSESSMENT:
Design is fundamentally sound. Power calculations are correct. Main concerns are:
- Connector current ratings (motor phases)
- Q_HS thermal if interlock fails (firmware dependency)
- Need datasheet verification on phase shunt power rating claim

Recommendation: APPROVE for prototype with mandatory fixes to motor connector
and battery wire specification before assembly.
